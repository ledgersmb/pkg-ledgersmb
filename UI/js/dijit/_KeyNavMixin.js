//>>built
define("dijit/_KeyNavMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(e,r,t,a,i,d,l,o){return r("dijit._KeyNavMixin",o,{tabIndex:"0",childSelector:null,postCreate:function(){if(this.inherited(arguments),t.set(this.domNode,"tabIndex",this.tabIndex),!this._keyNavCodes){var e=this._keyNavCodes={};e[a.HOME]=i.hitch(this,"focusFirstChild"),e[a.END]=i.hitch(this,"focusLastChild"),e[this.isLeftToRight()?a.LEFT_ARROW:a.RIGHT_ARROW]=i.hitch(this,"_onLeftArrow"),e[this.isLeftToRight()?a.RIGHT_ARROW:a.LEFT_ARROW]=i.hitch(this,"_onRightArrow"),e[a.UP_ARROW]=i.hitch(this,"_onUpArrow"),e[a.DOWN_ARROW]=i.hitch(this,"_onDownArrow")}var r=this,o="string"==typeof this.childSelector?this.childSelector:i.hitch(this,"childSelector");this.own(d(this.domNode,"keypress",i.hitch(this,"_onContainerKeypress")),d(this.domNode,"keydown",i.hitch(this,"_onContainerKeydown")),d(this.domNode,"focus",i.hitch(this,"_onContainerFocus")),d(this.containerNode,d.selector(o,"focusin"),function(e){r._onChildFocus(l.getEnclosingWidget(this),e)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(e,r){e&&(this.focusedChild&&e!==this.focusedChild&&this._onChildBlur(this.focusedChild),e.set("tabIndex",this.tabIndex),e.focus(r?"end":"start"))},_onContainerFocus:function(e){e.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){t.set(this.domNode,"tabIndex","-1"),this.inherited(arguments)},_onBlur:function(e){t.set(this.domNode,"tabIndex",this.tabIndex),this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null)),this.inherited(arguments)},_onChildFocus:function(e){e&&e!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),e.set("tabIndex",this.tabIndex),this.lastFocused=e,this._set("focusedChild",e))},_searchString:"",multiCharSearchDuration:1e3,onKeyboardSearch:function(e,r,t,a){e&&this.focusChild(e)},_keyboardSearchCompare:function(e,r){var t=e.domNode,a=e.label||(t.focusNode?t.focusNode.label:"")||t.innerText||t.textContent||"",i=a.replace(/^\s+/,"").substr(0,r.length).toLowerCase();return r.length&&i==r?-1:0},_onContainerKeydown:function(e){var r=this._keyNavCodes[e.keyCode];r?(r(e,this.focusedChild),e.stopPropagation(),e.preventDefault(),this._searchString=""):e.keyCode==a.SPACE&&this._searchTimer&&!(e.ctrlKey||e.altKey||e.metaKey)&&(e.stopImmediatePropagation(),e.preventDefault(),this._keyboardSearch(e," "))},_onContainerKeypress:function(e){e.charCode<=a.SPACE||e.ctrlKey||e.altKey||e.metaKey||(e.preventDefault(),e.stopPropagation(),this._keyboardSearch(e,String.fromCharCode(e.charCode).toLowerCase()))},_keyboardSearch:function(e,r){var t,a=null,d=0;i.hitch(this,function(){this._searchTimer&&this._searchTimer.remove(),this._searchString+=r;var e=/^(.)\1*$/.test(this._searchString),i=e?1:this._searchString.length;t=this._searchString.substr(0,i),this._searchTimer=this.defer(function(){this._searchTimer=null,this._searchString=""},this.multiCharSearchDuration);var l=this.focusedChild||null;if(1!=i&&l||(l=this._getNextFocusableChild(l,1))){var o=l;do{var n=this._keyboardSearchCompare(l,t);if(n&&0==d++&&(a=l),-1==n){d=-1;break}l=this._getNextFocusableChild(l,1)}while(l&&l!=o)}})(),this.onKeyboardSearch(a,e,t,d)},_onChildBlur:function(){},_getNextFocusableChild:function(e,r){var t=e;do{if(e)e=this._getNext(e,r);else if(!(e=this[r>0?"_getFirst":"_getLast"]()))break;if(null!=e&&e!=t&&e.isFocusable())return e}while(e!=t);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(e,r){if(e)for(e=e.domNode;e;)if((e=e[r<0?"previousSibling":"nextSibling"])&&"getAttribute"in e){var t=l.byNode(e);if(t)return t}return null}})});//# sourceMappingURL=_KeyNavMixin.js.map