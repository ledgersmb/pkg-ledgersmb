//>>built
define("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(e,r,a,t,i,d,l,o,n,s,f,m,v,u,h,y){return f("dijit-legacy-requires")&&y(0,function(){e(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])}),a("dijit.Menu",h,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):r.forEach(this.targetNodeIds,this.bindDomNode,this),this.inherited(arguments)},_iframeContentWindow:function(e){return v.get(this._iframeContentDocument(e))||this._iframeContentDocument(e).__parent__||e.name&&document.frames[e.name]||null},_iframeContentDocument:function(e){return e.contentDocument||e.contentWindow&&e.contentWindow.document||e.name&&document.frames[e.name]&&document.frames[e.name].document||null},bindDomNode:function(e){e=t.byId(e,this.ownerDocument);var r;if("iframe"==e.tagName.toLowerCase()){var a=e,d=this._iframeContentWindow(a);r=m.body(d.document)}else r=e==m.body(this.ownerDocument)?this.ownerDocument.documentElement:e;var l={node:e,iframe:a};i.set(e,"_dijitMenu"+this.id,this._bindings.push(l));var f=n.hitch(this,function(e){var r=this.selector,t=r?function(e){return s.selector(r,e)}:function(e){return e},i=this;return[s(e,t(this.leftClickToOpen?"click":"contextmenu"),function(e){e.stopPropagation(),e.preventDefault(),(new Date).getTime()<i._lastKeyDown+500||i._scheduleOpen(this,a,{x:e.pageX,y:e.pageY},e.target)}),s(e,t("keydown"),function(e){(93==e.keyCode||e.shiftKey&&e.keyCode==o.F10||i.leftClickToOpen&&e.keyCode==o.SPACE)&&(e.stopPropagation(),e.preventDefault(),i._scheduleOpen(this,a,null,e.target),i._lastKeyDown=(new Date).getTime())})]});l.connects=r?f(r):[],a&&(l.onloadHandler=n.hitch(this,function(){var e=this._iframeContentWindow(a),r=m.body(e.document);l.connects=f(r)}),a.addEventListener?a.addEventListener("load",l.onloadHandler,!1):a.attachEvent("onload",l.onloadHandler))},unBindDomNode:function(e){var r;try{r=t.byId(e,this.ownerDocument)}catch(e){return}var a="_dijitMenu"+this.id;if(r&&i.has(r,a)){for(var d,l=i.get(r,a)-1,o=this._bindings[l];d=o.connects.pop();)d.remove();var n=o.iframe;n&&(n.removeEventListener?n.removeEventListener("load",o.onloadHandler,!1):n.detachEvent("onload",o.onloadHandler)),i.remove(r,a),delete this._bindings[l]}},_scheduleOpen:function(e,r,a,t){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer,this._openMyself({target:t,delegatedTarget:e,iframe:r,coords:a})},1))},_openMyself:function(e){function r(){c.refocus&&k&&k.focus(),u.close(c)}var a=e.target,i=e.iframe,o=e.coords,n=!o;if(this.currentTarget=e.delegatedTarget,o){if(i){var s=d.position(i,!0),m=this._iframeContentWindow(i),v=d.docScroll(m.document),h=l.getComputedStyle(i),y=l.toPixelValue,w=(f("ie")&&f("quirks")?0:y(i,h.paddingLeft))+(f("ie")&&f("quirks")?y(i,h.borderLeftWidth):0),M=(f("ie")&&f("quirks")?0:y(i,h.paddingTop))+(f("ie")&&f("quirks")?y(i,h.borderTopWidth):0);o.x+=s.x+w-v.x,o.y+=s.y+M-v.y}}else o=d.position(a,!0),o.x+=10,o.y+=10;var c=this,g=this._focusManager.get("prevNode"),p=this._focusManager.get("curNode"),k=!p||t.isDescendant(p,this.domNode)?g:p;u.open({popup:this,x:o.x,y:o.y,onExecute:r,onCancel:r,orient:this.isLeftToRight()?"L":"R"}),this.focus(),n||this.defer(function(){this._cleanUp(!0)}),this._onBlur=function(){this.inherited("_onBlur",arguments),u.close(this)}},destroy:function(){r.forEach(this._bindings,function(e){e&&this.unBindDomNode(e.node)},this),this.inherited(arguments)}})});//# sourceMappingURL=Menu.js.map