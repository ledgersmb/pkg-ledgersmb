//>>built
define("dijit/layout/BorderContainer",["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","../_WidgetBase","../_Widget","../_TemplatedMixin","./LayoutContainer","./utils"],function(e,t,r,a,i,d,l,o,n,s,f,m,u,h,v,y){var w=r("dijit.layout._Splitter",[u,h],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments),this.horizontal=/top|bottom/.test(this.region),this._factor=/top|left/.test(this.region)?1:-1,this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){if(this.inherited(arguments),a.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")),this.container.persist){var e=t(this._cookieName);e&&(this.child.domNode.style[this.horizontal?"height":"width"]=e)}},_computeMaxSize:function(){var t=this.horizontal?"h":"w",r=d.getMarginBox(this.child.domNode)[t],a=e.filter(this.container.getChildren(),function(e){return"center"==e.region})[0],i=d.getContentBox(a.domNode)[t]-10;return Math.min(this.child.maxSize,r+i)},_startDrag:function(e){this.cover||(this.cover=i.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after")),a.add(this.cover,"dijitSplitterCoverActive"),this.fake&&i.destroy(this.fake),(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),a.add(this.domNode,"dijitSplitterShadow"),i.place(this.fake,this.domNode,"after")),a.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active"),this.fake&&a.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var t=this._factor,r=this.horizontal,o=r?"pageY":"pageX",m=e[o],u=this.domNode.style,h=r?"h":"w",v=l.getComputedStyle(this.child.domNode),y=d.getMarginBox(this.child.domNode,v)[h],w=this._computeMaxSize(),c=Math.max(this.child.minSize,d.getPadBorderExtents(this.child.domNode,v)[h]+10),M=this.region,p="top"==M||"bottom"==M?"top":"left",g=parseInt(u[p],10),b=this._resize,k=n.hitch(this.container,"_layoutChildren",this.child.id),F=this.ownerDocument;this._handlers=this._handlers.concat([s(F,f.move,this._drag=function(e,r){var a=e[o]-m,i=t*a+y,d=Math.max(Math.min(i,w),c);(b||r)&&k(d),u[p]=a+g+t*(d-i)+"px"}),s(F,"dragstart",function(e){e.stopPropagation(),e.preventDefault()}),s(this.ownerDocumentBody,"selectstart",function(e){e.stopPropagation(),e.preventDefault()}),s(F,f.release,n.hitch(this,"_stopDrag"))]),e.stopPropagation(),e.preventDefault()},_onMouse:function(e){var t="mouseover"==e.type||"mouseenter"==e.type;a.toggle(this.domNode,"dijitSplitterHover",t),a.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",t)},_stopDrag:function(e){try{this.cover&&a.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&i.destroy(this.fake),a.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(e),this._drag(e,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&t(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var e;e=this._handlers.pop();)e.remove()},_onKeyDown:function(e){this._resize=!0;var t=this.horizontal,r=1;switch(e.keyCode){case t?o.UP_ARROW:o.LEFT_ARROW:r*=-1;case t?o.DOWN_ARROW:o.RIGHT_ARROW:break;default:return}var a=d.getMarginSize(this.child.domNode)[t?"h":"w"]+this._factor*r;this.container._layoutChildren(this.child.id,Math.max(Math.min(a,this._computeMaxSize()),this.child.minSize)),e.stopPropagation(),e.preventDefault()},destroy:function(){this._cleanupHandlers(),delete this.child,delete this.container,delete this.cover,delete this.fake,this.inherited(arguments)}}),c=r("dijit.layout._Gutter",[u,h],{templateString:'<div class="dijitGutter" role="presentation"></div>',postMixInProperties:function(){this.inherited(arguments),this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments),a.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}}),M=r("dijit.layout.BorderContainer",v,{gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:w,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter"),this.inherited(arguments)},_setupChild:function(e){this.inherited(arguments);var t=e.region,r=e.isLeftToRight();if("leading"==t&&(t=r?"left":"right"),"trailing"==t&&(t=r?"right":"left"),t&&"center"!=t&&(e.splitter||this.gutters)&&!e._splitterWidget){var a=e.splitter?this._splitterClass:c;n.isString(a)&&(a=n.getObject(a));var d=new a({id:e.id+"_splitter",container:this,child:e,region:t,live:this.liveSplitters});d.isSplitter=!0,e._splitterWidget=d;var l="bottom"==t||t==(this.isLeftToRight()?"right":"left");i.place(d.domNode,e.domNode,l?"before":"after"),d.startup()}},layout:function(){this._layoutChildren()},removeChild:function(e){var t=e._splitterWidget;t&&(t.destroy(),delete e._splitterWidget),this.inherited(arguments)},getChildren:function(){return e.filter(this.inherited(arguments),function(e){return!e.isSplitter})},getSplitter:function(t){return e.filter(this.getChildren(),function(e){return e.region==t})[0]._splitterWidget},resize:function(e,t){if(!this.cs||!this.pe){var r=this.domNode;this.cs=l.getComputedStyle(r),this.pe=d.getPadExtents(r,this.cs),this.pe.r=l.toPixelValue(r,this.cs.paddingRight),this.pe.b=l.toPixelValue(r,this.cs.paddingBottom),l.set(r,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(t,r){if(this._borderBox&&this._borderBox.h){var a=[];e.forEach(this._getOrderedChildren(),function(e){a.push(e),e._splitterWidget&&a.push(e._splitterWidget)});var i={l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h};y.layoutChildren(this.domNode,i,a,t,r)}},destroyRecursive:function(){e.forEach(this.getChildren(),function(e){var t=e._splitterWidget;t&&t.destroy(),delete e._splitterWidget}),this.inherited(arguments)}});return M.ChildWidgetProperties={splitter:!1,minSize:0,maxSize:1/0},n.mixin(M.ChildWidgetProperties,v.ChildWidgetProperties),n.extend(m,M.ChildWidgetProperties),M._Splitter=w,M._Gutter=c,M});//# sourceMappingURL=BorderContainer.js.map