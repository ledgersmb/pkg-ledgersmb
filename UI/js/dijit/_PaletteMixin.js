//>>built
define("dijit/_PaletteMixin",["dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","./_CssStateMixin","./a11yclick","./focus","./typematic"],function(e,r,t,a,i,d,l,o,n,s,f){return e("dijit._PaletteMixin",o,{defaultTimeout:500,timeoutChangeRate:.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:null,_dyeFactory:function(e){return new("string"==typeof this.dyeClass?d.getObject(this.dyeClass):this.dyeClass)(e)},_preparePalette:function(e,r){this._cells=[];var t=this._blankGif;this.own(l(this.gridNode,n,d.hitch(this,"_onCellClick")));for(var o=0;o<e.length;o++)for(var s=a.create("tr",{tabIndex:"-1",role:"row"},this.gridNode),m=0;m<e[o].length;m++){var v=e[o][m];if(v){var u=this._dyeFactory(v,o,m,r[v]),h=a.create("td",{class:this.cellClass,tabIndex:"-1",title:r[v],role:"gridcell"},s);u.fillCell(h,t),h.idx=this._cells.length,this._cells.push({node:h,dye:u})}}this._xDim=e[0].length,this._yDim=e.length;var y={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1};for(var w in y)this.own(f.addKeyListener(this.domNode,{keyCode:i[w],ctrlKey:!1,altKey:!1,shiftKey:!1},this,function(){var e=y[w];return function(r){this._navigateByKey(e,r)}}(),this.timeoutChangeRate,this.defaultTimeout))},postCreate:function(){this.inherited(arguments),this._setCurrent(this._cells[0].node)},focus:function(){s.focus(this._currentFocus)},_onCellClick:function(e){for(var r=e.target;"TD"!=r.tagName;){if(!r.parentNode||r==this.gridNode)return;r=r.parentNode}var t=this._getDye(r).getValue();this._setCurrent(r),s.focus(r),this._setValueAttr(t,!0),e.stopPropagation(),e.preventDefault()},_setCurrent:function(e){"_currentFocus"in this&&r.set(this._currentFocus,"tabIndex","-1"),this._currentFocus=e,e&&r.set(e,"tabIndex",this.tabIndex)},_setValueAttr:function(e,r){if(this._selectedCell>=0&&t.remove(this._cells[this._selectedCell].node,this.cellClass+"Selected"),this._selectedCell=-1,e)for(var a=0;a<this._cells.length;a++)if(e==this._cells[a].dye.getValue()){this._selectedCell=a,t.add(this._cells[a].node,this.cellClass+"Selected");break}this._set("value",this._selectedCell>=0?e:null),(r||void 0===r)&&this.onChange(e)},onChange:function(){},_navigateByKey:function(e,r){if(-1!=r){var t=this._currentFocus.idx+e;if(t<this._cells.length&&t>-1){var a=this._cells[t].node;this._setCurrent(a),this.defer(d.hitch(s,"focus",a))}}},_getDye:function(e){return this._cells[e.idx].dye}})});//# sourceMappingURL=_PaletteMixin.js.map