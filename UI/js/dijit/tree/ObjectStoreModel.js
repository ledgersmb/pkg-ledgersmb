//>>built
define("dijit/tree/ObjectStoreModel",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/Deferred","dojo/_base/lang","dojo/when","../Destroyable"],function(e,t,r,a,i,d,l){return r("dijit.tree.ObjectStoreModel",l,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(e){i.mixin(this,e),this.childrenCache={}},getRoot:function(e,t){if(this.root)e(this.root);else{var r=this.store.query(this.query);r.then&&this.own(r),d(r,i.hitch(this,function(t){if(1!=t.length)throw new Error("dijit.tree.ObjectStoreModel: root query returned "+t.length+" items, but must return exactly one");this.root=t[0],e(this.root),r.observe&&r.observe(i.hitch(this,function(e){this.onChange(e)}),!0)}),t)}},mayHaveChildren:function(){return!0},getChildren:function(e,t,r){var a=this.store.getIdentity(e);if(this.childrenCache[a])return void d(this.childrenCache[a],t,r);var l=this.childrenCache[a]=this.store.getChildren(e);l.then&&this.own(l),l.observe&&this.own(l.observe(i.hitch(this,function(t,r,a){this.onChange(t),r!=a&&d(l,i.hitch(this,"onChildrenChange",e))}),!0)),d(l,t,r)},isItem:function(){return!0},getIdentity:function(e){return this.store.getIdentity(e)},getLabel:function(e){return e[this.labelAttr]},newItem:function(e,t,r,a){return this.store.put(e,{parent:t,before:a})},pasteItem:function(t,r,d,l,o,n){var s=new a;return r!==d||l||n?(r&&!l?this.getChildren(r,i.hitch(this,function(a){a=[].concat(a);var i=e.indexOf(a,t);a.splice(i,1),this.onChildrenChange(r,a),s.resolve(this.store.put(t,{overwrite:!0,parent:d,oldParent:r,before:n}))})):s.resolve(this.store.put(t,{overwrite:!0,parent:d,oldParent:r,before:n})),s):(s.resolve(!0),s)},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})});//# sourceMappingURL=ObjectStoreModel.js.map