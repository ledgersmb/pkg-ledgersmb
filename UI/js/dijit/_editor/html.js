//>>built
define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(e,r,t){var a={};r.setObject("dijit._editor.html",a);var i=a.escapeXml=function(e,r){return e=e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;"),r||(e=e.replace(/'/gm,"&#39;")),e};return a.getNodeHtml=function(e){var r=[];return a.getNodeHtmlHelper(e,r),r.join("")},a.getNodeHtmlHelper=function(r,d){switch(r.nodeType){case 1:var l=r.nodeName.toLowerCase();if(!l||"/"==l.charAt(0))return"";d.push("<",l);var o,n=[],s={};if(t("dom-attributes-explicit")||t("dom-attributes-specified-flag"))for(var f=0;o=r.attributes[f++];){var m=o.name;if("_dj"!==m.substr(0,3)&&(!t("dom-attributes-specified-flag")||o.specified)&&!(m in s)){var u=o.value;"src"!=m&&"href"!=m||r.getAttribute("_djrealurl")&&(u=r.getAttribute("_djrealurl")),8===t("ie")&&"style"===m&&(u=u.replace("HEIGHT:","height:").replace("WIDTH:","width:")),n.push([m,u]),s[m]=u}}else{var v=/^input$|^img$/i.test(r.nodeName)?r:r.cloneNode(!1),h=v.outerHTML,y=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi,w=h.match(y);h=h.substr(0,h.indexOf(">")),e.forEach(w,function(e){if(e){var t=e.indexOf("=");if(t>0){var a=e.substring(0,t);if("_dj"!=a.substr(0,3)){if(("src"==a||"href"==a)&&r.getAttribute("_djrealurl"))return void n.push([a,r.getAttribute("_djrealurl")]);var i,d;switch(a){case"style":i=r.style.cssText.toLowerCase();break;case"class":i=r.className;break;case"width":if("img"===l){d=/width=(\S+)/i.exec(h),d&&(i=d[1]);break}case"height":if("img"===l){d=/height=(\S+)/i.exec(h),d&&(i=d[1]);break}default:i=r.getAttribute(a)}null!=i&&n.push([a,i.toString()])}}}},this)}n.sort(function(e,r){return e[0]<r[0]?-1:e[0]==r[0]?0:1});for(var c=0;o=n[c++];)d.push(" ",o[0],'="',"string"==typeof o[1]?i(o[1],!0):o[1],'"');switch(l){case"br":case"hr":case"img":case"input":case"base":case"meta":case"area":case"basefont":d.push(" />");break;case"script":d.push(">",r.innerHTML,"</",l,">");break;default:d.push(">"),r.hasChildNodes()&&a.getChildrenHtmlHelper(r,d),d.push("</",l,">")}break;case 4:case 3:d.push(i(r.nodeValue,!0));break;case 8:d.push("\x3c!--",i(r.nodeValue,!0),"--\x3e");break;default:d.push("\x3c!-- Element not recognized - Type: ",r.nodeType," Name: ",r.nodeName,"--\x3e")}},a.getChildrenHtml=function(e){var r=[];return a.getChildrenHtmlHelper(e,r),r.join("")},a.getChildrenHtmlHelper=function(e,r){if(e)for(var i,d=e.childNodes||e,l=!t("ie")||d!==e,o=0;i=d[o++];)l&&i.parentNode!=e||a.getNodeHtmlHelper(i,r)},a});//# sourceMappingURL=html.js.map