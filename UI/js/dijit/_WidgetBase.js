//>>built
define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry"],function(e,r,t,a,i,d,l,o,n,s,f,m,v,u,h,y,w,M,c,p,g,k,b){function F(e){var r={};for(var t in e)r[t.toLowerCase()]=!0;return r}function I(e){return function(r){o[r?"set":"remove"](this.domNode,e,r),this._set(e,r)}}function j(e,r){return e===r||e!==e&&r!==r}v.add("dijit-legacy-requires",!u.isAsync),v.add("dojo-bidi",!1),v("dijit-legacy-requires")&&w(0,function(){e(["dijit/_base/manager"])});var z={},A=d("dijit._WidgetBase",[M,g],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:I("lang"),dir:"",_setDirAttr:I("dir"),class:"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(e){this._set("ownerDocument",e)},attributeMap:{},_blankGif:a.blankGif||e.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var e=this.constructor;if(!e._setterAttrs){var r=e.prototype,t=e._setterAttrs=[],a=e._onMap={};for(var i in r.attributeMap)t.push(i);for(i in r)/^on/.test(i)&&(a[i.substring(2).toLowerCase()]=i),/^_set[A-Z](.*)Attr$/.test(i)&&(i=i.charAt(4).toLowerCase()+i.substr(5,i.length-9),r.attributeMap&&i in r.attributeMap||t.push(i))}},postscript:function(e,r){this.create(e,r)},create:function(e,r){this._introspect(),this.srcNodeRef=l.byId(r),this._connects=[],this._supportingWidgets=[],this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id),e&&(this.params=e,h.mixin(this,e)),this.postMixInProperties(),this.id||(this.id=b.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document),this.ownerDocumentBody=p.body(this.ownerDocument),b.add(this),this.buildRendering();var t;if(this.domNode){this._applyAttributes();var a=this.srcNodeRef;a&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),t=!0),this.domNode.setAttribute("widgetId",this.id)}this.postCreate(),t&&delete this.srcNodeRef,this._created=!0},_applyAttributes:function(){var e={};for(var t in this.params||{})e[t]=this._get(t);r.forEach(this.constructor._setterAttrs,function(r){if(!(r in e)){var t=this._get(r);t&&this.set(r,t)}},this);for(t in e)this.set(t,e[t])},postMixInProperties:function(){},buildRendering:function(){if(this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div")),this.baseClass){var e=this.baseClass.split(" ");this.isLeftToRight()||(e=e.concat(r.map(e,function(e){return e+"Rtl"}))),n.add(this.domNode,e)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,r.forEach(this.getChildren(),function(e){e._started||e._destroyed||!h.isFunction(e.startup)||(e.startup(),e._started=!0)}))},destroyRecursive:function(e){this._beingDestroyed=!0,this.destroyDescendants(e),this.destroy(e)},destroy:function(e){function t(r){r.destroyRecursive?r.destroyRecursive(e):r.destroy&&r.destroy(e)}this._beingDestroyed=!0,this.uninitialize(),r.forEach(this._connects,h.hitch(this,"disconnect")),r.forEach(this._supportingWidgets,t),this.domNode&&r.forEach(b.findWidgets(this.domNode,this.containerNode),t),this.destroyRendering(e),b.remove(this.id),this._destroyed=!0},destroyRendering:function(e){this.bgIframe&&(this.bgIframe.destroy(e),delete this.bgIframe),this.domNode&&(e?o.remove(this.domNode,"widgetId"):s.destroy(this.domNode),delete this.domNode),this.srcNodeRef&&(e||s.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(e){r.forEach(this.getChildren(),function(r){r.destroyRecursive&&r.destroyRecursive(e)})},uninitialize:function(){return!1},_setStyleAttr:function(e){var r=this.domNode;h.isObject(e)?m.set(r,e):r.style.cssText?r.style.cssText+="; "+e:r.style.cssText=e,this._set("style",e)},_attrToDom:function(e,t,a){a=arguments.length>=3?a:this.attributeMap[e],r.forEach(h.isArray(a)?a:[a],function(r){var a=this[r.node||r||"domNode"];switch(r.type||"attribute"){case"attribute":h.isFunction(t)&&(t=h.hitch(this,t));var i=r.attribute?r.attribute:/^on[A-Z][a-zA-Z]*$/.test(e)?e.toLowerCase():e;a.tagName?o.set(a,i,t):a.set(i,t);break;case"innerText":a.innerHTML="",a.appendChild(this.ownerDocument.createTextNode(t));break;case"innerHTML":a.innerHTML=t;break;case"class":n.replace(a,t,this[e]);break;case"toggleClass":n.toggle(a,r.className||e,t)}},this)},get:function(e){var r=this._getAttrNames(e);return this[r.g]?this[r.g]():this._get(e)},set:function(e,r){if("object"==typeof e){for(var t in e)this.set(t,e[t]);return this}var a=this._getAttrNames(e),i=this[a.s];if(h.isFunction(i))var d=i.apply(this,Array.prototype.slice.call(arguments,1));else{var l=this.focusNode&&!h.isFunction(this.focusNode)?"focusNode":"domNode",o=this[l]&&this[l].tagName,n=o&&(z[o]||(z[o]=F(this[l]))),s=e in this.attributeMap?this.attributeMap[e]:a.s in this?this[a.s]:n&&a.l in n&&"function"!=typeof r||/^aria-|^data-|^role$/.test(e)?l:null;null!=s&&this._attrToDom(e,r,s),this._set(e,r)}return d||this},_attrPairNames:{},_getAttrNames:function(e){var r=this._attrPairNames;if(r[e])return r[e];var t=e.replace(/^[a-z]|-[a-zA-Z]/g,function(e){return e.charAt(e.length-1).toUpperCase()});return r[e]={n:e+"Node",s:"_set"+t+"Attr",g:"_get"+t+"Attr",l:t.toLowerCase()}},_set:function(e,r){var t=this[e];this[e]=r,this._created&&!j(t,r)&&(this._watchCallbacks&&this._watchCallbacks(e,t,r),this.emit("attrmodified-"+e,{detail:{prevValue:t,newValue:r}}))},_get:function(e){return this[e]},emit:function(e,r,t){r=r||{},void 0===r.bubbles&&(r.bubbles=!0),void 0===r.cancelable&&(r.cancelable=!0),r.detail||(r.detail={}),r.detail.widget=this;var a,i=this["on"+e];return i&&(a=i.apply(this,t||[r])),this._started&&!this._beingDestroyed&&y.emit(this.domNode,e.toLowerCase(),r),a},on:function(e,r){var a=this._onMap(e);return a?t.after(this,a,r,!0):this.own(y(this.domNode,e,r))[0]},_onMap:function(e){var r=this.constructor,t=r._onMap;if(!t){t=r._onMap={};for(var a in r.prototype)/^on/.test(a)&&(t[a.replace(/^on/,"").toLowerCase()]=a)}return t["string"==typeof e&&e.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?b.findWidgets(this.containerNode):[]},getParent:function(){return b.getEnclosingWidget(this.domNode.parentNode)},connect:function(e,r,t){return this.own(i.connect(e,r,this,t))[0]},disconnect:function(e){e.remove()},subscribe:function(e,r){return this.own(c.subscribe(e,h.hitch(this,r)))[0]},unsubscribe:function(e){e.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():f.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=m.get(this.domNode,"display")},placeAt:function(e,r){var t=!e.tagName&&b.byId(e);if(!t||!t.addChild||r&&"number"!=typeof r){var a=t&&"domNode"in t?t.containerNode&&!/after|before|replace/.test(r||"")?t.containerNode:t.domNode:l.byId(e,this.ownerDocument);s.place(this.domNode,a,r),!this._started&&(this.getParent()||{})._started&&this.startup()}else t.addChild(this,r);return this},defer:function(e,r){var t=setTimeout(h.hitch(this,function(){t&&(t=null,this._destroyed||h.hitch(this,e)())}),r||0);return{remove:function(){return t&&(clearTimeout(t),t=null),null}}}});return v("dojo-bidi")&&A.extend(k),A});//# sourceMappingURL=_WidgetBase.js.map