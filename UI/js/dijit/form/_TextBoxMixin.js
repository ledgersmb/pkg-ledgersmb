//>>built
define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/sniff","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(e,t,r,a,i,d,l,o){var n=t("dijit.form._TextBoxMixin"+(a("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(e,t,r){var a;void 0!==e&&(a=this.filter(e),"string"!=typeof r&&(r=null===a||"number"==typeof a&&isNaN(a)?"":this.filter(this.format(a,this.constraints)),0!=this.compare(a,this.filter(this.parse(r,this.constraints)))&&(r=null))),null==r||"number"==typeof r&&isNaN(r)||this.textbox.value==r||(this.textbox.value=r,this._set("displayedValue",this.get("displayedValue"))),this.inherited(arguments,[a,t])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(e){null==e?e="":"string"!=typeof e&&(e=String(e)),this.textbox.value=e,this._setValueAttr(this.get("value"),void 0),this._set("displayedValue",this.get("displayedValue"))},format:function(e){return null==e?"":e.toString?e.toString():e},parse:function(e){return e},_refreshState:function(){},onInput:function(){},_onInput:function(e){this._lastInputEventValue=this.textbox.value,this._processInput(this._lastInputProducingEvent||e),delete this._lastInputProducingEvent,this.intermediateChanges&&this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState(),this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){function e(e){var t;if("keydown"==e.type&&229!=e.keyCode){switch(t=e.keyCode){case i.SHIFT:case i.ALT:case i.CTRL:case i.META:case i.CAPS_LOCK:case i.NUM_LOCK:case i.SCROLL_LOCK:return}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(t){case i.NUMPAD_0:case i.NUMPAD_1:case i.NUMPAD_2:case i.NUMPAD_3:case i.NUMPAD_4:case i.NUMPAD_5:case i.NUMPAD_6:case i.NUMPAD_7:case i.NUMPAD_8:case i.NUMPAD_9:case i.NUMPAD_MULTIPLY:case i.NUMPAD_PLUS:case i.NUMPAD_ENTER:case i.NUMPAD_MINUS:case i.NUMPAD_PERIOD:case i.NUMPAD_DIVIDE:return}if(t>=65&&t<=90||t>=48&&t<=57||t==i.SPACE)return;var r=!1;for(var o in i)if(i[o]===e.keyCode){r=!0;break}if(!r)return}}if(t=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode,t||(t=e.keyCode>=65&&e.keyCode<=90||e.keyCode>=48&&e.keyCode<=57||e.keyCode==i.SPACE?String.fromCharCode(e.keyCode):e.keyCode),t||(t=229),"keypress"==e.type){if("string"!=typeof t)return;if((t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||" "===t)&&(e.ctrlKey||e.metaKey||e.altKey))return}var n,s={faux:!0};for(n in e)if(!/^(layer[XY]|returnValue|keyLocation)$/.test(n)){var f=e[n];"function"!=typeof f&&void 0!==f&&(s[n]=f)}if(d.mixin(s,{charOrCode:t,_wasConsumed:!1,preventDefault:function(){s._wasConsumed=!0,e.preventDefault()},stopPropagation:function(){e.stopPropagation()}}),this._lastInputProducingEvent=s,!1===this.onInput(s)&&(s.preventDefault(),s.stopPropagation()),!s._wasConsumed&&a("ie")<=9)switch(e.keyCode){case i.TAB:case i.ESCAPE:case i.DOWN_ARROW:case i.UP_ARROW:case i.LEFT_ARROW:case i.RIGHT_ARROW:break;default:if(e.keyCode==i.ENTER&&"textarea"!=this.textbox.tagName.toLowerCase())break;this.defer(function(){this.textbox.value!==this._lastInputEventValue&&l.emit(this.textbox,"input",{bubbles:!0})})}}this.textbox.setAttribute("value",this.textbox.value),this.inherited(arguments),this.own(l(this.textbox,"keydown, keypress, paste, cut, compositionend",d.hitch(this,e)),l(this.textbox,"input",d.hitch(this,"_onInput")),l(this.domNode,"keypress",function(e){e.stopPropagation()}))},_blankValue:"",filter:function(e){return null===e?this._blankValue:"string"!=typeof e?e:(this.trim&&(e=d.trim(e)),this.uppercase&&(e=e.toUpperCase()),this.lowercase&&(e=e.toLowerCase()),this.propercase&&(e=e.replace(/[^\s]+/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)})),e)},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(e){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(e){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==e&&(this._selectOnClickHandle=l.once(this.domNode,"mouseup, touchend",d.hitch(this,function(e){this._isTextSelected()||n.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="",this.inherited(arguments)}});return a("dojo-bidi")&&(n=t("dijit.form._TextBoxMixin",n,{_setValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode),this.inherited(arguments)}})),n._setSelectionRange=o._setSelectionRange=function(e,t,r){e.setSelectionRange&&e.setSelectionRange(t,r)},n.selectInputText=o.selectInputText=function(e,t,a){e=r.byId(e),isNaN(t)&&(t=0),isNaN(a)&&(a=e.value?e.value.length:0);try{e.focus(),n._setSelectionRange(e,t,a)}catch(e){}},n});//# sourceMappingURL=_TextBoxMixin.js.map