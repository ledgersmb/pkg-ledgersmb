//>>built
define("dijit/form/FilteringSelect",["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(e,t,r,a,i){return e("dijit.form.FilteringSelect",[a,i],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(e,t,r,a){t&&t[this.searchAttr]!==this._lastQuery||!t&&e.length&&this.store.getIdentity(e[0])!=this._lastQuery||(e.length?this.set("item",e[0],a):this.set("value","",a||void 0===a&&!this.focused,this.textbox.value,null))},_openResultList:function(e,t,r){t[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(e,a,i,d){if(this._onChangeActive||(a=null),void 0===d){if((null===e||""===e)&&(e="",!t.isString(i)))return void this._setDisplayedValueAttr(i||"",a);var l=this;this._lastQuery=e,r(this.store.get(e),function(e){l._callbackSetLabel(e?[e]:[],void 0,void 0,a)})}else this.valueNode.value=e,this.inherited(arguments,[e,a,i,d])},_setItemAttr:function(e,t,r){this.inherited(arguments),this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(e){return e.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(e,a){if(null==e&&(e=""),!this._created){if(!("displayedValue"in this.params))return;a=!1}if(this.store){this.closeDropDown();var i,d=t.clone(this.query),l=this._getDisplayQueryString(e);this.store._oldAPI?i=l:(i=this._patternToRegExp(l),i.toString=function(){return l}),this._lastQuery=d[this.searchAttr]=i,this.textbox.value=e,this._lastDisplayedValue=e,this._set("displayedValue",e);var o=this,n={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};t.mixin(n,this.fetchProperties),this._fetchHandle=this.store.query(d,n),r(this._fetchHandle,function(e){o._fetchHandle=null,o._callbackSetLabel(e||[],d,n,a)},function(e){o._fetchHandle=null,o._cancelingQuery||console.error("dijit.form.FilteringSelect: "+e.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})});//# sourceMappingURL=FilteringSelect.js.map