//>>built
define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/i18n","dojo/string","dojo/number","./RangeBoundTextBox"],function(e,t,r,a,i,d){var l=function(e){var t,e=e||{},a=r.getLocalization("dojo.cldr","number",r.normalizeLocale(e.locale)),i=e.pattern?e.pattern:a[(e.type||"decimal")+"Format"];return t="number"==typeof e.places?e.places:"string"==typeof e.places&&e.places.length>0?e.places.replace(/.*,/,""):-1!=i.indexOf(".")?i.split(".")[1].replace(/[^#0]/g,"").length:0,{sep:a.decimal,places:t}},o=e("dijit.form.NumberTextBoxMixin",null,{pattern:function(e){return"("+(this.focused&&this.editOptions?this._regExpGenerator(t.delegate(e,this.editOptions))+"|":"")+this._regExpGenerator(e)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:i.format,_regExpGenerator:i.regexp,_decimalInfo:l(),postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},_setConstraintsAttr:function(e){var t="number"==typeof e.places?e.places:0;t&&t++,"number"!=typeof e.max&&(e.max=9*Math.pow(10,15-t)),"number"!=typeof e.min&&(e.min=-9*Math.pow(10,15-t)),this.inherited(arguments,[e]),this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value),this._decimalInfo=l(e)},_onFocus:function(e){if(!this.disabled&&!this.readOnly){var t=this.get("value");if("number"==typeof t&&!isNaN(t)){var r=this.format(t,this.constraints);void 0!==r&&(this.textbox.value=r,"mouse"!==e&&this.textbox.select())}this.inherited(arguments)}},format:function(e,r){var a=String(e);return"number"!=typeof e?a:isNaN(e)?"":"rangeCheck"in this&&this.rangeCheck(e,r)||!1===r.exponent||!/\de[-+]?\d/i.test(a)?(this.editOptions&&this.focused&&(r=t.mixin({},r,this.editOptions)),this._formatter(e,r)):a},_parser:i.parse,parse:function(e,r){var a=t.mixin({},r,this.editOptions&&this.focused?this.editOptions:{});if(this.focused&&null!=a.places){var i=a.places,d="number"==typeof i?i:Number(i.split(",").pop());a.places="0,"+d}var l=this._parser(e,a);return this.editOptions&&this.focused&&isNaN(l)&&(l=this._parser(e,r)),l},_getDisplayedValueAttr:function(){var e=this.inherited(arguments);return isNaN(e)?this.textbox.value:e},filter:function(e){return null==e||"string"==typeof e&&""==e?NaN:("number"!=typeof e||isNaN(e)||0==e||(e=i.round(e,this._decimalInfo.places)),this.inherited(arguments,[e]))},serialize:function(e,t){return"number"!=typeof e||isNaN(e)?"":this.inherited(arguments)},_setBlurValue:function(){var e=t.hitch(t.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(e,!0)},_setValueAttr:function(e,t,r){void 0!==e&&void 0===r&&(r=String(e),"number"==typeof e?isNaN(e)?r="":("rangeCheck"in this&&this.rangeCheck(e,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(r))&&(r=void 0):e?e=void 0:(r="",e=NaN)),this.inherited(arguments,[e,t,r])},_getValueAttr:function(){var e=this.inherited(arguments);{if(!isNaN(e)||""===this.textbox.value)return e;if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&new RegExp("^"+i._realNumberRegexp(t.delegate(this.constraints))+"$").test(this.textbox.value)){var r=Number(this.textbox.value);return isNaN(r)?void 0:r}}},isValid:function(e){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var t=this.get("value");return!(isNaN(t)||!this.rangeCheck(t,this.constraints))&&(!(!1===this.constraints.exponent||!/\de[-+]?\d/i.test(this.textbox.value))||this.inherited(arguments))},_isValidSubset:function(){var e="number"==typeof this.constraints.min,t="number"==typeof this.constraints.max,r=this.get("value");if(isNaN(r)||!e&&!t)return this.inherited(arguments);var i=0|r,d=r<0,l=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),o=this.maxLength||20,n=o-this.textbox.value.length,s=l?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",f=l?i+"."+s:i+"",m=a.rep("9",n),u=r,v=r;return d?u=Number(f+m):v=Number(f+m),!(e&&v<this.constraints.min||t&&u>this.constraints.max)}}),n=e("dijit.form.NumberTextBox",[d,o],{baseClass:"dijitTextBox dijitNumberTextBox"});return n.Mixin=o,n});//# sourceMappingURL=NumberTextBox.js.map