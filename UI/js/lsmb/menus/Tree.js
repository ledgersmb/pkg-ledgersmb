//>>built
define("lsmb/menus/Tree",["dojo/_base/declare","dojo/on","dojo/_base/lang","dojo/_base/event","dojo/mouse","dojo/_base/array","dojo/store/JsonRest","dojo/store/Observable","dojo/store/Memory","dijit/Tree","dijit/tree/ObjectStoreModel","dijit/registry"],function(e,t,r,a,i,d,o,l,n,s,f,m){var u=new o({target:"menu.pl?action=menuitems_json",idProperty:"id"}),h=new n({idProperty:"id"});h=new l(h);var v=!1;return e("lsmb/menus/Tree",[s],{model:new f({store:h,labelAttr:"label",mayHaveChildren:function(e){return e.menu},getChildren:function(e,t,r){v?t(h.query({parent:e.id})):(u.query({}).then(function(r){h.setData(r),t(h.query({parent:e.id}))},function(){r()}),v=!0)},getRoot:function(e,t){e({id:0})}}),showRoot:!1,openOnClick:!0,postCreate:function(){this.inherited(arguments),this.own(t(this.containerNode,"mousedown",r.hitch(this,this.__onClick)))},onClick:function(e,t,r){if(!e.menu){var a="",o=i.isLeft(r)&&(r.ctrlKey||r.metaKey)||i.isMiddle(r)||d.some(e.args,function(e){return"new=1"==e});e.module&&(a+=e.module+"?",a+=e.args.join("&")),o?window.open(location.origin+location.pathname+location.search+"#"+a,"_blank"):m.byId("maindiv").load_link(a)}},__onClick:function(e){if(!i.isLeft(e)||e.ctrlKey||e.metaKey){a.stop(e),e.preventDefault();var t=dijit.getEnclosingWidget(e.target),r=t.item;this.onClick(r,t,e)}}})});//# sourceMappingURL=Tree.js.map