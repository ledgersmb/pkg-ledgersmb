//>>built
define("dojo/request/util",["exports","../errors/RequestError","../errors/CancelError","../Deferred","../io-query","../_base/array","../_base/lang","../promise/Promise","../has"],function(e,r,a,t,i,d,l,o,n){function s(e){return n("native-arraybuffer")&&e instanceof ArrayBuffer}function f(e){return n("native-blob")&&e instanceof Blob}function m(e){return"undefined"!=typeof Element?e instanceof Element:1===e.nodeType}function v(e){return n("native-formdata")&&e instanceof FormData}function u(e){return e&&"object"==typeof e&&!v(e)&&!m(e)&&!f(e)&&!s(e)}function h(e){return w(e)}function y(e){return void 0!==e.data?e.data:e.text}e.deepCopy=function(r,a){for(var t in a){var i=r[t],d=a[t];"__proto__"!==t&&i!==d&&(u(d)?"[object Date]"===Object.prototype.toString.call(d)?r[t]=new Date(d):l.isArray(d)?r[t]=e.deepCopyArray(d):i&&"object"==typeof i?e.deepCopy(i,d):r[t]=e.deepCopy({},d):r[t]=d)}return r},e.deepCopyArray=function(r){for(var a=[],t=0,i=r.length;t<i;t++){var d=r[t];"object"==typeof d?a.push(e.deepCopy({},d)):a.push(d)}return a},e.deepCreate=function(r,a){a=a||{};var t,i,d=l.delegate(r);for(t in r)(i=r[t])&&"object"==typeof i&&(d[t]=e.deepCreate(i,a[t]));return e.deepCopy(d,a)};var w=Object.freeze||function(e){return e};e.deferred=function(i,d,n,s,f,m){function v(e){throw e.response=i,e}var u=new t(function(e){return d&&d(u,i),e&&(e instanceof r||e instanceof a)?e:new a("Request canceled",i)});u.response=i,u.isValid=n,u.isReady=s,u.handleResponse=f;var M=u.then(h).otherwise(v);e.notify&&M.then(l.hitch(e.notify,"emit","load"),l.hitch(e.notify,"emit","error"));var c=M.then(y),g=new o;for(var p in c)c.hasOwnProperty(p)&&(g[p]=c[p]);return g.response=M,w(g),m&&u.then(function(e){m.call(u,e)},function(e){m.call(u,i,e)}),u.promise=g,u.then=g.then,u},e.addCommonMethods=function(e,r){d.forEach(r||["GET","POST","PUT","DELETE"],function(r){e[("DELETE"===r?"DEL":r).toLowerCase()]=function(a,t){return t=l.delegate(t||{}),t.method=r,e(a,t)}})},e.parseArgs=function(e,r,a){var t=r.data,d=r.query;return t&&!a&&("object"!=typeof t||n("native-xhr2")&&(s(t)||f(t))||(r.data=i.objectToQuery(t))),d?("object"==typeof d&&(d=i.objectToQuery(d)),r.preventCache&&(d+=(d?"&":"")+"request.preventCache="+ +new Date)):r.preventCache&&(d="request.preventCache="+ +new Date),e&&d&&(e+=(~e.indexOf("?")?"&":"?")+d),{url:e,options:r,getHeader:function(e){return null}}},e.checkStatus=function(e){return(e=e||0)>=200&&e<300||304===e||1223===e||!e}});//# sourceMappingURL=util.js.map