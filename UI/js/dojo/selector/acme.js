//>>built
define("dojo/selector/acme",["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(e,r,a,t,i){var d=t.trim,l=a.forEach,o=function(){return i.doc},n="BackCompat"==o().compatMode,s=">~+",f=!1,m=function(){return!0},v=function(e){s.indexOf(e.slice(-1))>=0?e+=" * ":e+=" ";for(var r,a,t=function(r,a){return d(e.slice(r,a))},i=[],l=-1,o=-1,n=-1,m=-1,v=-1,u=-1,h=-1,y="",w="",M=0,c=e.length,g=null,p=null,k=function(){if(h>=0){var e=h==M?null:t(h,M);g[s.indexOf(e)<0?"tag":"oper"]=e,h=-1}},b=function(){u>=0&&(g.id=t(u,M).replace(/\\/g,""),u=-1)},F=function(){v>=0&&(g.classes.push(t(v+1,M).replace(/\\/g,"")),v=-1)},I=function(){b(),k(),F()},z=function(){I(),m>=0&&g.pseudos.push({name:t(m+1,M)}),g.loops=g.pseudos.length||g.attrs.length||g.classes.length,g.oquery=g.query=t(a,M),g.otag=g.tag=g.oper?null:g.tag||"*",g.tag&&(g.tag=g.tag.toUpperCase()),i.length&&i[i.length-1].oper&&(g.infixOper=i.pop(),g.query=g.infixOper.query+" "+g.query),i.push(g),g=null};y=w,w=e.charAt(M),M<c;M++)if("\\"!=y)if(g||(a=M,g={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return f?this.otag:this.tag}},h=M),r)w==r&&(r=null);else if("'"!=w&&'"'!=w)if(l>=0){if("]"==w){p.attr?p.matchFor=t(n||l+1,M):p.attr=t(l+1,M);var A=p.matchFor;A&&('"'!=A.charAt(0)&&"'"!=A.charAt(0)||(p.matchFor=A.slice(1,-1))),p.matchFor&&(p.matchFor=p.matchFor.replace(/\\/g,"")),g.attrs.push(p),p=null,l=n=-1}else if("="==w){var q="|~^$*".indexOf(y)>=0?y:"";p.type=q+w,p.attr=t(l+1,M-q.length),n=M+1}}else o>=0?")"==w&&(m>=0&&(p.value=t(o+1,M)),m=o=-1):"#"==w?(I(),u=M+1):"."==w?(I(),v=M):":"==w?(I(),m=M):"["==w?(I(),l=M,p={}):"("==w?(m>=0&&(p={name:t(m+1,M),value:null},g.pseudos.push(p)),o=M):" "==w&&y!=w&&z();else r=w;return i},u=function(e,r){return e?r?function(){return e.apply(window,arguments)&&r.apply(window,arguments)}:e:r},h=function(e,r){var a=r||[];return e&&a.push(e),a},y=function(e){return 1==e.nodeType},w="",M=function(e,r){return e?"class"==r?e.className||w:"for"==r?e.htmlFor||w:"style"==r?e.style.cssText||w:(f?e.getAttribute(r):e.getAttribute(r,2))||w:w},c={"*=":function(e,r){return function(a){return M(a,e).indexOf(r)>=0}},"^=":function(e,r){return function(a){return 0==M(a,e).indexOf(r)}},"$=":function(e,r){return function(a){var t=" "+M(a,e),i=t.lastIndexOf(r);return i>-1&&i==t.length-r.length}},"~=":function(e,r){var a=" "+r+" ";return function(r){return(" "+M(r,e)+" ").indexOf(a)>=0}},"|=":function(e,r){var a=r+"-";return function(t){var i=M(t,e);return i==r||0==i.indexOf(a)}},"=":function(e,r){return function(a){return M(a,e)==r}}},g=o().documentElement,p=!(g.nextElementSibling||"nextElementSibling"in g),k=p?"nextSibling":"nextElementSibling",b=p?"previousSibling":"previousElementSibling",F=p?y:m,I=function(e){for(;e=e[b];)if(F(e))return!1;return!0},z=function(e){for(;e=e[k];)if(F(e))return!1;return!0},A=function(e){var a=e.parentNode;a=7!=a.nodeType?a:a.nextSibling;var t=0,i=a.children||a.childNodes,d=e._i||e.getAttribute("_i")||-1,l=a._l||(void 0!==a.getAttribute?a.getAttribute("_l"):-1);if(!i)return-1;var o=i.length;if(l==o&&d>=0&&l>=0)return d;r("ie")&&void 0!==a.setAttribute?a.setAttribute("_l",o):a._l=o,d=-1;for(var n=a.firstElementChild||a.firstChild;n;n=n[k])F(n)&&(r("ie")?n.setAttribute("_i",++t):n._i=++t,e===n&&(d=t));return d},q=function(e){return!(A(e)%2)},E=function(e){return A(e)%2},G={checked:function(e,r){return function(e){return!!("checked"in e?e.checked:e.selected)}},disabled:function(e,r){return function(e){return e.disabled}},enabled:function(e,r){return function(e){return!e.disabled}},"first-child":function(){return I},"last-child":function(){return z},"only-child":function(e,r){return function(e){return I(e)&&z(e)}},empty:function(e,r){return function(e){for(var r=e.childNodes,a=e.childNodes.length,t=a-1;t>=0;t--){var i=r[t].nodeType;if(1===i||3==i)return!1}return!0}},contains:function(e,r){var a=r.charAt(0);return'"'!=a&&"'"!=a||(r=r.slice(1,-1)),function(e){return e.innerHTML.indexOf(r)>=0}},not:function(e,r){var a=v(r)[0],t={el:1};"*"!=a.tag&&(t.tag=1),a.classes.length||(t.classes=1);var i=P(a,t);return function(e){return!i(e)}},"nth-child":function(e,r){var a=parseInt;if("odd"==r)return E;if("even"==r)return q;if(-1!=r.indexOf("n")){var t=r.split("n",2),i=t[0]?"-"==t[0]?-1:a(t[0]):1,d=t[1]?a(t[1]):0,l=0,o=-1;if(i>0?d<0?d=d%i&&i+d%i:d>0&&(d>=i&&(l=d-d%i),d%=i):i<0&&(i*=-1,d>0&&(o=d,d%=i)),i>0)return function(e){var r=A(e);return r>=l&&(o<0||r<=o)&&r%i==d};r=d}var n=a(r);return function(e){return A(e)==n}}},j=r("ie")<9||9==r("ie")&&r("quirks")?function(e){var r=e.toLowerCase();return"class"==r&&(e="className"),function(a){return f?a.getAttribute(e):a[e]||a[r]}}:function(e){return function(r){return r&&r.getAttribute&&r.hasAttribute(e)}},P=function(e,r){if(!e)return m;r=r||{};var a=null;return"el"in r||(a=u(a,y)),"tag"in r||"*"!=e.tag&&(a=u(a,function(r){return r&&(f?r.tagName:r.tagName.toUpperCase())==e.getTag()})),"classes"in r||l(e.classes,function(e,r,t){var i=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)");a=u(a,function(e){return i.test(e.className)}),a.count=r}),"pseudos"in r||l(e.pseudos,function(e){var r=e.name;G[r]&&(a=u(a,G[r](r,e.value)))}),"attrs"in r||l(e.attrs,function(e){var r,t=e.attr;e.type&&c[e.type]?r=c[e.type](t,e.matchFor):t.length&&(r=j(t)),r&&(a=u(a,r))}),"id"in r||e.id&&(a=u(a,function(r){return!!r&&r.id==e.id})),a||"default"in r||(a=m),a},S=function(e){return function(r,a,t){for(;r=r[k];)if(!p||y(r)){t&&!X(r,t)||!e(r)||a.push(r);break}return a}},T=function(e){return function(r,a,t){for(var i=r[k];i;){if(F(i)){if(t&&!X(i,t))break;e(i)&&a.push(i)}i=i[k]}return a}},Q=function(e,r){var t=function(e){var r=[];try{r=Array.prototype.slice.call(e)}catch(i){for(var a=0,t=e.length;a<t;a++)r.push(e[a])}return r};return e=e||m,function(i,d,l){var o,n=0,s=[];for(s=t(i.children||i.childNodes),r&&a.forEach(s,function(e){1===e.nodeType&&(s=s.concat(t(e.getElementsByTagName("*"))))});o=s[n++];)F(o)&&(!l||X(o,l))&&e(o,n)&&d.push(o);return d}},H=function(e,r){for(var a=e.parentNode;a&&a!=r;)a=a.parentNode;return!!a},_={},x=function(r){var t=_[r.query];if(t)return t;var i=r.infixOper,d=i?i.oper:"",l=P(r,{el:1}),s=r.tag,f="*"==s,v=o().getElementsByClassName;if(d){var u={el:1};f&&(u.tag=1),l=P(r,u),"+"==d?t=S(l):"~"==d?t=T(l):">"==d&&(t=Q(l))}else if(r.id)l=!r.loops&&f?m:P(r,{el:1,id:1}),t=function(t,i){var d=e.byId(r.id,t.ownerDocument||t);if(t.ownerDocument&&!H(t,t.ownerDocument)){var o=11===t.nodeType?t.childNodes:[t];a.some(o,function(e){var a=Q(function(e){return e.id===r.id},!0)(e,[]);if(a.length)return d=a[0],!1})}if(d&&l(d))return 9==t.nodeType?h(d,i):H(d,t)?h(d,i):void 0};else if(v&&/\{\s*\[native code\]\s*\}/.test(String(v))&&r.classes.length&&!n){l=P(r,{el:1,classes:1,id:1});var y=r.classes.join(" ");t=function(e,r,a){for(var t,i=h(0,r),d=0,o=e.getElementsByClassName(y);t=o[d++];)l(t,e)&&X(t,a)&&i.push(t);return i}}else f||r.loops?(l=P(r,{el:1,tag:1,id:1}),t=function(e,a,t){for(var i,d=h(0,a),o=0,n=r.getTag(),s=n?e.getElementsByTagName(n):[];i=s[o++];)l(i,e)&&X(i,t)&&d.push(i);return d}):t=function(e,a,t){for(var i,d=h(0,a),l=0,o=r.getTag(),n=o?e.getElementsByTagName(o):[];i=n[l++];)X(i,t)&&d.push(i);return d};return _[r.query]=t},N=function(e,r){for(var a,t,i,d,l,o=h(e),n=r.length,s=0;s<n;s++){l=[],a=r[s],t=o.length-1,t>0&&(d={},l.nozip=!0);for(var f=x(a),m=0;i=o[m];m++)f(i,l,d);if(!l.length)break;o=l}return l},D={},C={},L=function(e){var r=v(d(e));if(1==r.length){var a=x(r[0]);return function(e){var r=a(e,[]);return r&&(r.nozip=!0),r}}return function(e){return N(e,r)}},K=r("ie")?"commentStrip":"nozip",R="querySelectorAll",J=!!o()[R],W=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,U=function(e,r,a,t){return a?(r?r+" ":"")+a+(t?" "+t:""):e},O=/([^[]*)([^\]]*])?/g,B=function(e,r,a){return r.replace(W,U)+(a||"")},Y=function(e,a){if(e=e.replace(O,B),J){var t=C[e];if(t&&!a)return t}var i=D[e];if(i)return i;var d=e.charAt(0),l=-1==e.indexOf(" ");if(e.indexOf("#")>=0&&l&&(a=!0),J&&!a&&-1==s.indexOf(d)&&(!r("ie")||-1==e.indexOf(":"))&&!(n&&e.indexOf(".")>=0)&&-1==e.indexOf(":contains")&&-1==e.indexOf(":checked")&&-1==e.indexOf("|=")){var o=s.indexOf(e.charAt(e.length-1))>=0?e+" *":e;return C[e]=function(r){if(9==r.nodeType||l)try{var a=r[R](o);return a[K]=!0,a}catch(e){}return Y(e,!0)(r)}}var f=e.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return D[e]=f.length<2?L(e):function(e){for(var r,a=0,t=[];r=f[a++];)t=t.concat(L(r)(e));return t}},V=0,$=r("ie")?function(e){return f?e.getAttribute("_uid")||e.setAttribute("_uid",++V)||V:e.uniqueID}:function(e){return e._uid||(e._uid=++V)},X=function(e,r){if(!r)return 1;var a=$(e);return r[a]?0:r[a]=1},Z="_zipIdx",ee=function(e){if(e&&e.nozip)return e;if(!e||!e.length)return[];if(e.length<2)return[e[0]];var a=[];V++;var t,i;if(r("ie")&&f){var d=V+"";for(t=0;t<e.length;t++)(i=e[t])&&i.getAttribute(Z)!=d&&(a.push(i),i.setAttribute(Z,d))}else if(r("ie")&&e.commentStrip)try{for(t=0;t<e.length;t++)(i=e[t])&&y(i)&&a.push(i)}catch(e){}else for(t=0;t<e.length;t++)(i=e[t])&&i[Z]!=V&&(a.push(i),i[Z]=V);return a},re=function(e,r){r=r||o();var a=r.ownerDocument||r;f="div"===a.createElement("div").tagName;var t=Y(e)(r);return t&&t.nozip?t:ee(t)};return re.filter=function(r,t,i){for(var d,l=[],o=v(t),n=1!=o.length||/[^\w#\.]/.test(t)?function(r){return-1!=a.indexOf(re(t,e.byId(i)),r)}:P(o[0]),s=0;d=r[s];s++)n(d)&&l.push(d);return l},re});//# sourceMappingURL=acme.js.map