//>>built
define("dojo/store/Memory",["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(e,r,a){return e("dojo.store.Memory",null,{constructor:function(e){for(var r in e)this[r]=e[r];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:a,get:function(e){return this.data[this.index[e]]},getIdentity:function(e){return e[this.idProperty]},put:function(e,r){var a=this.data,t=this.index,i=this.idProperty,d=e[i]=r&&"id"in r?r.id:i in e?e[i]:Math.random();if(d in t){if(r&&!1===r.overwrite)throw new Error("Object already exists");a[t[d]]=e}else t[d]=a.push(e)-1;return d},add:function(e,r){return(r=r||{}).overwrite=!1,this.put(e,r)},remove:function(e){var r=this.index,a=this.data;if(e in r)return a.splice(r[e],1),this.setData(a),!0},query:function(e,a){return r(this.queryEngine(e,a)(this.data))},setData:function(e){e.items?(this.idProperty=e.identifier||this.idProperty,e=this.data=e.items):this.data=e,this.index={};for(var r=0,a=e.length;r<a;r++)this.index[e[r][this.idProperty]]=r}})});//# sourceMappingURL=Memory.js.map