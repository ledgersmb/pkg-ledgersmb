//>>built
define("dojo/store/Cache",["../_base/lang","../when"],function(e,r){var a=function(a,t,i){return i=i||{},e.delegate(a,{query:function(e,r){var d=a.query(e,r);return d.forEach(function(e){i.isLoaded&&!i.isLoaded(e)||t.put(e)}),d},queryEngine:a.queryEngine||t.queryEngine,get:function(e,i){return r(t.get(e),function(d){return d||r(a.get(e,i),function(r){return r&&t.put(r,{id:e}),r})})},add:function(e,i){return r(a.add(e,i),function(r){return t.add(r&&"object"==typeof r?r:e,i),r})},put:function(e,i){return t.remove(i&&i.id||this.getIdentity(e)),r(a.put(e,i),function(r){return t.put(r&&"object"==typeof r?r:e,i),r})},remove:function(e,i){return r(a.remove(e,i),function(r){return t.remove(e,i)})},evict:function(e){return t.remove(e)}})};return e.setObject("dojo.store.Cache",a),a});//# sourceMappingURL=Cache.js.map