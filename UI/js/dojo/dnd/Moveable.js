//>>built
define("dojo/dnd/Moveable",["../_base/array","../_base/declare","../_base/lang","../dom","../dom-class","../Evented","../has","../on","../topic","../touch","./common","./Mover","../_base/window"],function(e,r,a,t,i,d,l,o,n,s,f,m,v){function u(){"touchAction"in document.body.style?h="touchAction":"msTouchAction"in document.body.style&&(h="msTouchAction"),(y=function(e,r){e.style[h]=r})(arguments[0],arguments[1])}var h,y=function(){};return l("touch-action")&&(y=u),r("dojo.dnd.Moveable",[d],{handle:"",delay:0,skip:!1,constructor:function(e,r){this.node=t.byId(e),y(this.node,"none"),r||(r={}),this.handle=r.handle?t.byId(r.handle):null,this.handle||(this.handle=this.node),this.delay=r.delay>0?r.delay:0,this.skip=r.skip,this.mover=r.mover?r.mover:m,this.events=[o(this.handle,s.press,a.hitch(this,"onMouseDown")),o(this.handle,"dragstart",a.hitch(this,"onSelectStart")),o(this.handle,"selectstart",a.hitch(this,"onSelectStart"))]},markupFactory:function(e,r,a){return new a(r,e)},destroy:function(){e.forEach(this.events,function(e){e.remove()}),y(this.node,""),this.events=this.node=this.handle=null},onMouseDown:function(e){this.skip&&f.isFormElement(e)||(this.delay?(this.events.push(o(this.handle,s.move,a.hitch(this,"onMouseMove")),o(this.handle.ownerDocument,s.release,a.hitch(this,"onMouseUp"))),this._lastX=e.pageX,this._lastY=e.pageY):this.onDragDetected(e),e.stopPropagation(),e.preventDefault())},onMouseMove:function(e){(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)&&(this.onMouseUp(e),this.onDragDetected(e)),e.stopPropagation(),e.preventDefault()},onMouseUp:function(e){for(var r=0;r<2;++r)this.events.pop().remove();e.stopPropagation(),e.preventDefault()},onSelectStart:function(e){this.skip&&f.isFormElement(e)||(e.stopPropagation(),e.preventDefault())},onDragDetected:function(e){new this.mover(this.node,e,this)},onMoveStart:function(e){n.publish("/dnd/move/start",e),i.add(v.body(),"dojoMove"),i.add(this.node,"dojoMoveItem")},onMoveStop:function(e){n.publish("/dnd/move/stop",e),i.remove(v.body(),"dojoMove"),i.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(e,r){this.onMoving(e,r);var a=e.node.style;a.left=r.l+"px",a.top=r.t+"px",this.onMoved(e,r)},onMoving:function(){},onMoved:function(){}})});//# sourceMappingURL=Moveable.js.map