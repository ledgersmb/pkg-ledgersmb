//>>built
define("dojo/dnd/Mover",["../_base/array","../_base/declare","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(e,r,a,t,i,d,l,o,n,s,f,m,v){return r("dojo.dnd.Mover",[n],{constructor:function(e,r,t){function i(e){e.preventDefault(),e.stopPropagation()}this.node=d.byId(e),this.marginBox={l:r.pageX,t:r.pageY},this.mouseButton=r.button;var l=this.host=t,o=e.ownerDocument;this.events=[s(o,f.move,a.hitch(this,"onFirstMove")),s(o,f.move,a.hitch(this,"onMouseMove")),s(o,f.release,a.hitch(this,"onMouseUp")),s(o,"dragstart",i),s(o.body,"selectstart",i)],v.autoScrollStart(o),l&&l.onMoveStart&&l.onMoveStart(this)},onMouseMove:function(e){v.autoScroll(e);var r=this.marginBox;this.host.onMove(this,{l:r.l+e.pageX,t:r.t+e.pageY},e),e.preventDefault(),e.stopPropagation()},onMouseUp:function(e){(t("webkit")&&t("mac")&&2==this.mouseButton?0==e.button:this.mouseButton==e.button)&&this.destroy(),e.preventDefault(),e.stopPropagation()},onFirstMove:function(e){var r,a,t=this.node.style,d=this.host;switch(t.position){case"relative":case"absolute":r=Math.round(parseFloat(t.left))||0,a=Math.round(parseFloat(t.top))||0;break;default:t.position="absolute";var n=l.getMarginBox(this.node),s=i.doc.body,f=o.getComputedStyle(s),m=l.getMarginBox(s,f),v=l.getContentBox(s,f);r=n.l-(v.l-m.l),a=n.t-(v.t-m.t)}this.marginBox.l=r-this.marginBox.l,this.marginBox.t=a-this.marginBox.t,d&&d.onFirstMove&&d.onFirstMove(this,e),this.events.shift().remove()},destroy:function(){e.forEach(this.events,function(e){e.remove()});var r=this.host;r&&r.onMoveStop&&r.onMoveStop(this),this.events=this.node=this.host=null}})});//# sourceMappingURL=Mover.js.map