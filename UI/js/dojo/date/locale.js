//>>built
define("dojo/date/locale",["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(e,r,a,t,i,d,l,o,n){function s(e,r,a,i){return i.replace(/([a-z])\1*/gi,function(d){var o,n,s=d.charAt(0),f=d.length,m=["abbr","wide","narrow"];switch(s){case"G":o=r[f<4?"eraAbbr":"eraNames"][e.getFullYear()<0?0:1];break;case"y":switch(o=e.getFullYear(),f){case 1:break;case 2:if(!a.fullYear){o=String(o),o=o.substr(o.length-2);break}default:n=!0}break;case"Q":case"q":o=Math.ceil((e.getMonth()+1)/3),n=!0;break;case"M":case"L":var u=e.getMonth();if(f<3)o=u+1,n=!0;else{var h=["months","L"==s?"standAlone":"format",m[f-3]].join("-");o=r[h][u]}break;case"w":o=v._getWeekOfYear(e,0),n=!0;break;case"d":o=e.getDate(),n=!0;break;case"D":o=v._getDayOfYear(e),n=!0;break;case"e":case"c":var y=e.getDay();if(f<2){o=(y-t.getFirstDayOfWeek(a.locale)+8)%7;break}case"E":if(y=e.getDay(),f<3)o=y+1,n=!0;else{var w=["days","c"==s?"standAlone":"format",m[f-3]].join("-");o=r[w][y]}break;case"a":var M=e.getHours()<12?"am":"pm";o=a[M]||r["dayPeriods-format-wide-"+M];break;case"h":case"H":case"K":case"k":var c=e.getHours();switch(s){case"h":o=c%12||12;break;case"H":o=c;break;case"K":o=c%12;break;case"k":o=c||24}n=!0;break;case"m":o=e.getMinutes(),n=!0;break;case"s":o=e.getSeconds(),n=!0;break;case"S":o=Math.round(e.getMilliseconds()*Math.pow(10,f-3)),n=!0;break;case"v":case"z":if(o=v._getZone(e,!0,a))break;f=4;case"Z":var p=v._getZone(e,!1,a),k=[p<=0?"+":"-",l.pad(Math.floor(Math.abs(p)/60),2),l.pad(Math.abs(p)%60,2)];4==f&&(k.splice(0,0,"GMT"),k.splice(3,0,":")),o=k.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+i)}return n&&(o=l.pad(o,f)),o})}function f(e,a,t,i){var d=function(e){return e};a=a||d,t=t||d,i=i||d;var l=e.match(/(''|[^'])+/g),o="'"==e.charAt(0);return r.forEach(l,function(e,r){e?(l[r]=(o?t:a)(e.replace(/''/g,"'")),o=!o):l[r]=""}),i(l.join(""))}function m(e,r,a,t){return t=d.escapeString(t),a.strict||(t=t.replace(" a"," ?a")),t.replace(/([a-z])\1*/gi,function(t){var i,d=t.charAt(0),l=t.length,o="",n="";switch(a.strict?(l>1&&(o="0{"+(l-1)+"}"),l>2&&(n="0{"+(l-2)+"}")):(o="0?",n="0{0,2}"),d){case"y":i="\\d{2,4}";break;case"M":case"L":if(l>2){i=r["months-"+("L"==d?"standAlone":"format")+"-"+u[l-3]].slice(0).join("|"),a.strict||(i=i.replace(/\./g,""),i="(?:"+i+")\\.?")}else i="1[0-2]|"+o+"[1-9]";break;case"D":i="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+o+"[1-9][0-9]|"+n+"[1-9]";break;case"d":i="3[01]|[12]\\d|"+o+"[1-9]";break;case"w":i="[1-4][0-9]|5[0-3]|"+o+"[1-9]";break;case"E":case"e":case"c":i=".+?";break;case"h":i="1[0-2]|"+o+"[1-9]";break;case"k":i="1[01]|"+o+"\\d";break;case"H":i="1\\d|2[0-3]|"+o+"\\d";break;case"K":i="1\\d|2[0-4]|"+o+"[1-9]";break;case"m":case"s":i="[0-5]\\d";break;case"S":i="\\d{"+l+"}";break;case"a":var s=a.am||r["dayPeriods-format-wide-am"],f=a.pm||r["dayPeriods-format-wide-pm"];i=s+"|"+f,a.strict||(s!=s.toLowerCase()&&(i+="|"+s.toLowerCase()),f!=f.toLowerCase()&&(i+="|"+f.toLowerCase()),-1!=i.indexOf(".")&&(i+="|"+i.replace(/\./g,""))),i=i.replace(/\./g,"\\.");break;default:i=".*"}return e&&e.push(t),"("+i+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var v={};e.setObject(n.id.replace(/\//g,"."),v),v._getZone=function(e,r,t){return r?a.getTimezoneName(e):e.getTimezoneOffset()},v.format=function(r,a){a=a||{};var t=i.normalizeLocale(a.locale),d=a.formatLength||"short",l=v._getGregorianBundle(t),o=[],n=e.hitch(this,s,r,l,a);if("year"==a.selector)return f(l["dateFormatItem-yyyy"]||"yyyy",n);var m;return"date"!=a.selector&&(m=a.timePattern||l["timeFormat-"+d])&&o.push(f(m,n)),"time"!=a.selector&&(m=a.datePattern||l["dateFormat-"+d])&&o.push(f(m,n)),1==o.length?o[0]:l["dateTimeFormat-"+d].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(e,r){return o[r]})},v.regexp=function(e){return v._parseInfo(e).regexp},v._parseInfo=function(r){r=r||{};var a,t=i.normalizeLocale(r.locale),d=v._getGregorianBundle(t),l=r.formatLength||"short",o=r.datePattern||d["dateFormat-"+l],n=r.timePattern||d["timeFormat-"+l];a="date"==r.selector?o:"time"==r.selector?n:d["dateTimeFormat-"+l].replace(/\{(\d+)\}/g,function(e,r){return[n,o][r]});var s=[];return{regexp:f(a,e.hitch(this,m,s,d,r)),tokens:s,bundle:d}},v.parse=function(e,t){var i=/[\u200E\u200F\u202A\u202E]/g,d=v._parseInfo(t),l=d.tokens,o=d.bundle,n=new RegExp("^"+d.regexp.replace(i,"")+"$",d.strict?"":"i"),s=n.exec(e&&e.replace(i,""));if(!s)return null;var f=["abbr","wide","narrow"],m=[1970,0,1,0,0,0,0],u="",h=r.every(s,function(e,a){if(!a)return!0;var i=l[a-1],d=i.length,n=i.charAt(0);switch(n){case"y":if(2!=d&&t.strict)m[0]=e;else if(e<100){e=Number(e);var s=""+(new Date).getFullYear(),v=100*s.substring(0,2),h=Math.min(Number(s.substring(2,4))+20,99);m[0]=e<h?v+e:v-100+e}else{if(t.strict)return!1;m[0]=e}break;case"M":case"L":if(d>2){var y=o["months-"+("L"==n?"standAlone":"format")+"-"+f[d-3]].concat();if(t.strict||(e=e.replace(".","").toLowerCase(),y=r.map(y,function(e){return e.replace(".","").toLowerCase()})),-1==(e=r.indexOf(y,e)))return!1}else e--;m[1]=e;break;case"E":case"e":case"c":var w=o["days-"+("c"==n?"standAlone":"format")+"-"+f[d-3]].concat();if(t.strict||(e=e.toLowerCase(),w=r.map(w,function(e){return e.toLowerCase()})),-1==(e=r.indexOf(w,e)))return!1;break;case"D":m[1]=0;case"d":m[2]=e;break;case"a":var M=t.am||o["dayPeriods-format-wide-am"],c=t.pm||o["dayPeriods-format-wide-pm"];if(!t.strict){var p=/\./g;e=e.replace(p,"").toLowerCase(),M=M.replace(p,"").toLowerCase(),c=c.replace(p,"").toLowerCase()}if(t.strict&&e!=M&&e!=c)return!1;u=e==c?"p":e==M?"a":"";break;case"K":24==e&&(e=0);case"h":case"H":case"k":if(e>23)return!1;m[3]=e;break;case"m":m[4]=e;break;case"s":m[5]=e;break;case"S":m[6]=e}return!0}),y=+m[3];"p"===u&&y<12?m[3]=y+12:"a"===u&&12==y&&(m[3]=0);var w=new Date(m[0],m[1],m[2],m[3],m[4],m[5],m[6]);t.strict&&w.setFullYear(m[0]);var M=l.join(""),c=-1!=M.indexOf("d"),p=-1!=M.indexOf("M");return!h||p&&w.getMonth()>m[1]||c&&w.getDate()>m[2]?null:((p&&w.getMonth()<m[1]||c&&w.getDate()<m[2])&&(w=a.add(w,"hour",1)),w)};var u=["abbr","wide","narrow"],h=[],y={};return v.addCustomFormats=function(e,r){h.push({pkg:e,name:r}),y={}},v._getGregorianBundle=function(a){if(y[a])return y[a];var t={};return r.forEach(h,function(r){var d=i.getLocalization(r.pkg,r.name,a);t=e.mixin(t,d)},this),y[a]=t},v.addCustomFormats(n.id.replace(/\/date\/locale$/,".cldr"),"gregorian"),v.getNames=function(e,r,a,t){var i,d=v._getGregorianBundle(t),l=[e,a,r];if("standAlone"==a){i=d[l.join("-")],1==i[0]&&(i=void 0)}return l[1]="format",(i||d[l.join("-")]).concat()},v.isWeekend=function(e,r){var a=t.getWeekend(r),i=(e||new Date).getDay();return a.end<a.start&&(a.end+=7,i<a.start&&(i+=7)),i>=a.start&&i<=a.end},v._getDayOfYear=function(e){return a.difference(new Date(e.getFullYear(),0,1,e.getHours()),e)+1},v._getWeekOfYear=function(e,r){1==arguments.length&&(r=0);var a=new Date(e.getFullYear(),0,1).getDay(),t=(a-r+7)%7,i=Math.floor((v._getDayOfYear(e)+t-1)/7);return a==r&&i++,i},v});//# sourceMappingURL=locale.js.map